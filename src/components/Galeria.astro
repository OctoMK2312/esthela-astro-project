---
const fotos = [
  "foto-galeria-1.jpg",
  "foto-galeria-2.jpg",
  "foto-galeria-3.jpg",
  "foto-galeria-4.jpg",
];
---

<section class="container animate-on-scroll">
  <h2>Nuestros Momentos</h2>
  <div class="galeria">
    {
      fotos.map((foto) => (
        <img
          class="foto-galeria"
          src={`/photos/${foto}`}
          alt="Un momento especial juntos"
          loading="lazy"
        />
      ))
    }
  </div>
</section>

<!-- Estructura del Modal para la GalerÃ­a -->
<div id="galeria-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content-galeria">
    <button class="modal-close" aria-label="Cerrar modal">&times;</button>
    <img id="modal-imagen" src="" alt="Recuerdo en grande" />
  </div>
</div>

<script>
  const galeriaFotos = document.querySelectorAll(".foto-galeria");
  const modal = document.getElementById("galeria-modal");
  const modalImg = document.getElementById("modal-imagen");
  const closeBtn = modal.querySelector(".modal-close");
  const body = document.body;

  function openModal(src) {
    if (modalImg) {
      modalImg.src = src;
    }
    modal.style.display = "flex";
    body.classList.add("modal-open");
  }

  function closeModal() {
    modal.style.display = "none";
    body.classList.remove("modal-open");
  }

  galeriaFotos.forEach((foto) => {
    foto.addEventListener("click", () => {
      openModal(foto.src);
    });
  });

  closeBtn.addEventListener("click", closeModal);

  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modal.style.display === "flex") {
      closeModal();
    }
  });
</script>

<style>
  .galeria {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin-top: 2rem;
  }
  .subtitulo {
    color: #888;
    margin-top: -1.5rem;
    margin-bottom: 2rem;
  }
  .foto-galeria {
    width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease;
    cursor: pointer;
  }
  .foto-galeria:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }
</style>
